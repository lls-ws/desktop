#!/bin/sh
# Library to scripts on Lubuntu Desktop
#
# Autor: Leandro Luiz
# email: lls.homeoffice@gmail.com

list_dir()
{
	
	DIR_LIST="$1"
	
	for FILE in ${DIR_LIST}/*; do
		
		echo "$(basename "${FILE}")"
		
		update_file $(basename "${FILE}") /${DIR_LIST} ${DIR_LIST}
		
	done
	
}

update_files_dir()
{

	echo -e "${APP_NAME}..."
	
	for FILE in ${DIR_SOURCE}/*; do
		
		if [ -f ${FILE} ]; then
		
			update_file $(basename "${FILE}") "${DIR_UPDATE}" "${DIR_SOURCE}"
			
		fi
		
	done
	
}

update_file()
{

	FILE_CONF="$1"
	
	DIR_APP="$2"
	
	DIR_GIT="$3"
	
	if [ ! -d "${DIR_APP}" ]; then
	
		mkdir -pv "${DIR_APP}"
	
	fi
	
	echo "Copy ${FILE_CONF} configuration..."
	
	if [ -f ${DIR_GIT}/${FILE_CONF} ]; then
	
		rm -fv ${DIR_APP}/${FILE_CONF}
	
		cp -fv ${DIR_GIT}/${FILE_CONF} ${DIR_APP}
		
	fi
	
}

update_files()
{

	MSG_TXT="$1"

	DIR_UPDATE="$2"
	DIR_SOURCE="$3"

	echo -e "\n${MSG_TXT} ${APP_NAME}..."

	for FILE_SET in "${FILES_SET[@]}"
	do
		
		update_file "${FILE_SET}" "${DIR_UPDATE}" "${DIR_SOURCE}"
			
	done
	
}

check_root()
{
	
	if [ "$EUID" -ne 0 ]; then
	
		echo "Run script with sudo command!"
		echo "Use: sudo $0 $1"
		exit 1
	  
	fi
	
}

check_user()
{
	
	if [ "$EUID" -eq 0 ]; then
    
		echo "Root user not permited!"
		echo "Use: bash $0 $1"
		exit 1;
		
	fi
	
}

remove_list()
{
	
	FILE_LIST="$1"
	
	DIR_LIST="/etc/apt/sources.list.d"
	
	rm -fv ${DIR_LIST}/${FILE_LIST}.*
	
}

install_deb()
{
	
	wget ${URL_DEB}/${FILE_DEB}
	
	sudo apt -y install ./${FILE_DEB}
	
 	rm -fv ${FILE_DEB}
	
}

shared_dir()
{
	
	DIR_SHD="/mnt/shared"
	
	if [ ! -d ${DIR_SHD} ]; then
	
		mkdir -pv ${DIR_SHD}
		
	fi
	
	DIRS_SET=(
		"filmes"
		"series"
		"musica"
		"iso"
		"log"
	)
	
	for DIR_SET in "${DIRS_SET[@]}"
	do
		
		DIR_SET=${DIR_SHD}/${DIR_SET}
		
		if [ ! -d ${DIR_SET} ]; then
	
			mkdir -v ${DIR_SET}
			
		fi
			
	done
	
	chown -R ${USER_TRANSMISISON}:${USER_TRANSMISISON} ${DIR_SHD}
	
	chmod -R 777 ${DIR_SHD}
	
	ls -al ${DIR_SHD}
	
}

run_scripts()
{

	SCRIPT_OPT="$1"
	
	DIR_SCRIPT="util/${SCRIPT_OPT}"
	
	for SH_FILE in ${DIR_SCRIPT}/*; do
		
		SH_FILE=$(basename "${SH_FILE}")
		
		echo -e "\nRun Script: ${SH_FILE}"
		
		bash ${DIR_SCRIPT}/${SH_FILE} ${SCRIPT_OPT}
		
	done
	
}

util_show()
{
	
	echo "Showing File: /${DIR_ETC}/${FILE_SET}"
	
	cat /${DIR_ETC}/${FILE_SET}
	
}

copy_home()
{
	
	rm -fv ${FILE_UPDATE}
	
	cp -fv ${FILE_SOURCE} ${FILE_UPDATE}
	
}

set_app()
{

	APP_NAME="$1"
	DIR_SOURCE="config/${APP_NAME}"
	DIR_UPDATE=~/.${DIR_SOURCE}

}

apps_show()
{
	
	set_app "${1}"
	
	ls -al ${DIR_UPDATE}
	
}

apps_array()
{
	
	APPS_CONF=(
		"vlc"
		"mpv"
		"geany"
		"openbox"
		"kvantum"
		"autostart"
	)
	
}

USER_TRANSMISISON="debian-transmission"
